<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PM-SS</title>
  <meta name="theme-color" content="#0d6efd">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding-bottom: 78px; }
    .appbar { position: sticky; top: 0; z-index: 1020; }
    .bottom-nav { position: fixed; bottom: 0; left:0; right:0; z-index: 1030; }
    .card { border-radius: 16px; }
    .btn { border-radius: 12px; }
    .form-control, .form-select { border-radius: 12px; }
    .small-muted { color: #6c757d; font-size: .9rem; }
    .nowrap { white-space: nowrap; }
  </style>
</head>
<body>
  <nav class="navbar navbar-light bg-white border-bottom appbar">
    <div class="container" style="max-width: 760px;">
      <span class="navbar-brand mb-0 h5">PM-SS</span>
      <div class="d-flex align-items-center gap-2">
        <button id="btnLang" class="btn btn-outline-primary btn-sm">TH</button>
        <span id="meLabel" class="small-muted"></span>
        <button id="btnLogout" class="btn btn-outline-secondary btn-sm">Logout</button>
      </div>
    </div>
  </nav>

  <main class="container py-3" style="max-width: 760px;">
    <section id="viewLogin" class="d-none">
      <div class="text-center my-4">
        <div class="display-6 fw-bold">PM-SS</div>
        <div class="small-muted" data-i18n="subtitle"></div>
      </div>
      <div class="card shadow-sm">
        <div class="card-body p-4">
          <div class="mb-3">
            <label class="form-label" data-i18n="company"></label>
            <select id="loginCompany" class="form-select"></select>
          </div>
          <div class="mb-3">
            <label class="form-label" data-i18n="username"></label>
            <input id="loginUsername" class="form-control" autocomplete="username" />
          </div>
          <div class="mb-3">
            <label class="form-label" data-i18n="password"></label>
            <input id="loginPassword" type="password" class="form-control" autocomplete="current-password" />
          </div>
          <button id="btnLogin" class="btn btn-primary w-100" data-i18n="login"></button>

          <div class="d-flex justify-content-between mt-3">
            <button id="btnGoRegister" class="btn btn-link px-0" data-i18n="register"></button>
            <button id="btnForgot" class="btn btn-link px-0" data-i18n="forgot"></button>
          </div>

          <div id="loginError" class="text-danger mt-2 d-none"></div>
          <hr>
          <div class="small-muted">
            Demo: company <span class="nowrap">SCP</span> / <span class="nowrap">ABC</span><br/>
            Users: <span class="nowrap">hr.admin</span>, <span class="nowrap">tl.a</span>, <span class="nowrap">tech.a1</span> / Password1!
          </div>
        </div>
      </div>
    </section>

    <section id="viewRegister" class="d-none">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <div class="h5 mb-0" data-i18n="register_title"></div>
        <button class="btn btn-outline-secondary btn-sm" data-nav="login" data-i18n="back"></button>
      </div>

      <div class="card shadow-sm">
        <div class="card-body p-4">
          <div class="mb-3">
            <label class="form-label" data-i18n="company"></label>
            <select id="regCompany" class="form-select"></select>
          </div>
          <div class="mb-3">
            <label class="form-label" data-i18n="full_name"></label>
            <input id="regFullName" class="form-control" />
          </div>
          <div class="row g-3">
            <div class="col-6">
              <label class="form-label" data-i18n="phone"></label>
              <input id="regPhone" class="form-control" />
            </div>
            <div class="col-6">
              <label class="form-label" data-i18n="id_last4"></label>
              <input id="regIdLast4" class="form-control" maxlength="4" />
            </div>
          </div>
          <div class="mt-3">
            <label class="form-label" data-i18n="desired_team"></label>
            <input id="regDesiredTeam" class="form-control" placeholder="???? Team 1" />
          </div>
          <div class="mt-3">
            <label class="form-label" data-i18n="note"></label>
            <textarea id="regNote" class="form-control" rows="3"></textarea>
          </div>

          <button id="btnSubmitRegister" class="btn btn-primary w-100 mt-4" data-i18n="submit"></button>
          <div id="regMsg" class="mt-3 d-none"></div>
        </div>
      </div>
    </section>

    <section id="viewDashboard" class="d-none">
      <div class="d-flex justify-content-between align-items-end mb-2">
        <div>
          <div class="h5 mb-0" data-i18n="dashboard"></div>
          <div id="roleLabel" class="small-muted"></div>
        </div>
        <span id="todayLabel" class="small-muted"></span>
      </div>

      <div class="row g-3">
        <div class="col-12 col-md-6">
          <div class="card shadow-sm"><div class="card-body">
            <div class="fw-semibold" data-i18n="my_leave"></div>
            <div class="small-muted" data-i18n="my_leave_desc"></div>
            <div class="d-flex gap-2 mt-3">
              <button class="btn btn-outline-primary w-100" data-nav="leaveNew" data-i18n="new"></button>
              <button class="btn btn-outline-secondary w-100" data-nav="leaveMy" data-i18n="list"></button>
            </div>
          </div></div>
        </div>

        <div class="col-12 col-md-6">
          <div class="card shadow-sm"><div class="card-body">
            <div class="fw-semibold" data-i18n="my_advance"></div>
            <div class="small-muted" id="advanceHint"></div>
            <div class="d-flex gap-2 mt-3">
              <button class="btn btn-outline-primary w-100" data-nav="advNew" data-i18n="new"></button>
              <button class="btn btn-outline-secondary w-100" data-nav="advMy" data-i18n="list"></button>
            </div>
          </div></div>
        </div>

        <div id="cardApprovals" class="col-12 d-none">
          <div class="card shadow-sm"><div class="card-body">
            <div class="fw-semibold" data-i18n="approvals"></div>
            <div class="small-muted" data-i18n="approvals_desc"></div>
            <div class="d-flex gap-2 mt-3">
              <button class="btn btn-outline-primary w-100" data-nav="approveLeave" data-i18n="approve_leave"></button>
              <button class="btn btn-outline-primary w-100" data-nav="approveAdv" data-i18n="approve_advance"></button>
            </div>
          </div></div>
        </div>

        <div id="cardHR" class="col-12 d-none">
          <div class="card shadow-sm"><div class="card-body">
            <div class="fw-semibold" data-i18n="hr_tools"></div>
            <div class="small-muted" data-i18n="hr_tools_desc"></div>
            <div class="d-flex gap-2 mt-3 flex-wrap">
              <button class="btn btn-outline-primary" data-nav="hrRegs" data-i18n="hr_registrations"></button>
              <button class="btn btn-outline-primary" data-nav="hrUsers" data-i18n="hr_users"></button>
              <button class="btn btn-outline-primary" data-nav="hrResets" data-i18n="hr_resets"></button>
            </div>
          </div></div>
        </div>

        <div class="col-12">
          <div class="card shadow-sm"><div class="card-body">
            <div class="fw-semibold" data-i18n="profile"></div>
            <div id="profileBox" class="small-muted mt-1">-</div>
          </div></div>
        </div>
      </div>
    </section>

    <section id="viewLeaveNew" class="d-none">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <div class="h5 mb-0" data-i18n="leave_new"></div>
        <button class="btn btn-outline-secondary btn-sm" data-nav="dashboard" data-i18n="back"></button>
      </div>
      <div class="card shadow-sm"><div class="card-body p-4">
        <div class="mb-3">
          <label class="form-label" data-i18n="leave_type"></label>
          <select id="leaveType" class="form-select">
            <option value="SICK">SICK</option>
            <option value="PERSONAL">PERSONAL</option>
            <option value="VACATION">VACATION</option>
          </select>
        </div>
        <div class="row g-3">
          <div class="col-6">
            <label class="form-label" data-i18n="start_date"></label>
            <input id="leaveStart" type="date" class="form-control">
          </div>
          <div class="col-6">
            <label class="form-label" data-i18n="end_date"></label>
            <input id="leaveEnd" type="date" class="form-control">
          </div>
        </div>
        <div class="mt-3">
          <label class="form-label" data-i18n="note"></label>
          <textarea id="leaveNote" class="form-control" rows="3"></textarea>
        </div>
        <button id="btnSubmitLeave" class="btn btn-primary w-100 mt-4" data-i18n="submit"></button>
        <div id="leaveNewMsg" class="mt-3 d-none"></div>
      </div></div>
    </section>

    <section id="viewLeaveMy" class="d-none">
      <div class="d-flex align-items-center justify-content-between mb-2">
        <div class="h5 mb-0" data-i18n="leave_list"></div>
        <button class="btn btn-outline-secondary btn-sm" data-nav="dashboard" data-i18n="back"></button>
      </div>
      <div id="leaveMyList" class="d-grid gap-3"></div>
    </section>

    <section id="viewAdvNew" class="d-none">
      <div class="d-flex align-items-center justify-content-between mb-2"
